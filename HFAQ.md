#HFAQ

Вопросы разбиты по категориям:
* [Организационные вопросы](#org)
* [Интерфейс арены](#interface)
* [Пакет для локальной разработки](#local-pack)
* [Симулятор торгов](#simulator)
* [API симулятора](#api)
* [Разное](#misc)

-------
<a id="org"></a>
### Организационные вопросы
**Q: Можно ли участвовать в данном соревновании командой? **

A: Нет, это личное соревнование. По правилам нужно указывать свое настоящее имя и приз будет тоже один. Финальные версии будут проверяться на антиплагиат, так что нельзя будет использовать несколько логинов.

-------------

<a id="interface"></a>
### Интерфейс арены
**Q: Как послать стратегию на контрольное тестирование? **

A: Чтобы послать стратегию на контрольное тестирование, нужно переключить триггер "Набор дней" на главной странице арены из режима "Тренировочный" в режим "Контрольный". В день каждому участнику предоставляется 2 посылки в контрольном режиме.

---

<a id="local-pack"></a>
### Пакет для локальной разработки

**Q: У меня не получается прогнать стратегии из пакета для локальной разработки. Что делать?**

A: Прежде всего, убедитесь, что на вашей системе установлен:
- python 2.7.x или 3.x (`python --version`),
- cmake 2.8.4 и выше (`cmake --version`),
- компилятор C++:
    - для Linux – компилятор g++ 4.9 и выше (`g++ --version`),
    - для Mac OS – Apple LLVM version 6.0 и выше, (`c++ --version`),
    - для Windows - MinGW-w64 4.9 и выше.

Подробнее в разделе [Установка зависимостей](./local-pack/requirements.md).

---

<a id="simulator"></a>
### Симулятор торгов

**Q: Есть ли временная задержка между моментом отправки заявки и временем ее постановки в стакан?**

A: Время, прошедшее от отправки заявки на биржу до его приема биржей, называется *roundtrip*-ом. В симуляторе *roundtrip* полагается равным 10 микросекундам. Это значит, что все ваши запросы на добавление/удаление заявок производятся не мгновенно, а с небольшой задержкой по времени, имитирующей время "полёта" заявки до биржи.

---

<a id="api"></a>
### API симулятора
**Q: Как узнать текущую лучшую цену по направлению?**

A: Текущую лучшую цену можно узнать непосредственно у стакана, приходящего в функцию [trading_book_update](api/ParticipantStrategy.md#trading_book_update):
```c++
void trading_book_update(const OrderBook& order_book) override {
    Price best_price = order_book.best_price(dir);
}
```

либо из любого места, используя структуру-агрегатор информации по стакану [trading_book_info](api/ParticipantStrategy.md#trading_book_info) типа [ContestBookInfo](api/ContestBookInfo.md):
```c++
Price best_price = trading_book_info.best_price(dir);
```

---

<a id="misc"></a>
### Разное

**Q: Какой механизм работы стакана?**

A: Когда новая заявка X попадает в стакан, она становится в очередь заявок по своему направлению и по своей цене. Внутри каждой цены заявки отсортированы по времени постановки. Если стакан остался консистентным, то есть цена лучшего бида строго меньше цены лучшего аска, то на этом обработка заявки заканчивается. Если же цена лучшего бида стала не меньше цены лучшего аска, то начинается сведение заявок.

Предположим, что заявка X была бидом, то есть заявкой на покупку. Тогда одна за одной берутся аски в порядке возрастания цены, а внутри каждой цены -- в порядке возрастания времени постановки заявки, и сводятся с заявкой X, в результате чего получается сделка по цене сводимой пассивной заявки (в данном случае аска) c объемом, равным минимуму из участвующих в сделке заявок. Объем сделки вычитается из объемов участвующих в сделке заявок. Так продолжается до тех пор, пока лучшая цена бида не станет меньше лучшей цены аска.

**Q: Какие бывают типы заявок?**

A: В рамках данного контеста используется 2 типа заявок: лимитная заявка (limit order) и IOC (Immediate-Or-Cancel). Если после выполнения всех сведений от заявки что-то осталось, то в случае лимитной заявки она остается стоять в стакане по своей заявленной цене. В случае IOC-заявки, она сразу после выполнения всех возможных сведений удаляется из стакана.

Рассмотрим пример. Пусть в стакане было 3 заявки на продажу:
- объемом 10 по цене 101, поставленная в 11:00,
- объемом 20 по цене 101, поставленная в 11:01,
- объемом 10 по цене 102, поставленная в 11:00.

| Цена | Объем (время постановки) |
| -- | -- |
| 101 | 10 (11:00), 20 (11:01)|
|102 | 10 (11:00) |

Пусть далее участник торгов ставит заявку на покупку X по некоторой цене с объемом 35. Рассмотрим несколько вариантов:
1. X – лимитная по цене 101. Тогда произойдет 2 сделки объемами 10 и 20, и оставшиеся 5 лотов от X останутся стоять в стакане по цене 101.
2. X – типа IOC по цене 101. Тогда произойдет 2 сделки, а остаток X удалится из стакана.
3. X – типа IOC по цене 102. Тогда произойдет 3 сделки объемами 10, 20 и 5 по ценам 101, 101 и 102, и от X ничего не останется.
