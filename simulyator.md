# Симулятор торгов

**Симулятор** представляет собой программу, которая последовательно считывает данные, обрабатывает их, шлет стратегии информацию об изменениях и обрабатывает ответы стратегии -- запросы на добавление или снятие заявок.

Данные, на которых происходит работа симулятора, были получены непосредственно от биржи, и в этом смысле являются полностью реалистичными. Однако, следует понимать, что они представляют собой информацию о реальных торгах. При этом, как только мы начнем торговать своей "виртуальной" стратегий (которая на самом деле на бирже не торговала), мы начнем влиять на то что происходит с инструментом. Одним из важных предположений работы симулятора является то, что стратегия влияет на общее поведение биржевого инструмента несущественно (что бы это ни значило). Понятно, что если стратегия, например, попытается купить 1000 лотов, в то время как в стакане находится всего 500, то дальнейшее поведение инструмента предсказать крайне трудно. В симуляторе одновременно поддерживается 2 "состояния" инструмента: то которое было на бирже, и то которое учитывает поведение стратегии, причем на первое стратегия никак не влияет.

Еще одним важным моментом является наличие так называемого **roundtrip**'а -- времени "долета" наших запросов до биржи. Понятно, что в реальных торгах от того момента, когда уже принято решение о каком-то действии, до того момента, когда информации об этом действии попадет на бирже, проходит определенное время. Именно это время олицетворяет собой roundtrip -- в итоге, все заявки попадают в стакан не мгновенно, а лишь по истечении этого времени. То же относится и к запросам на удаление.
